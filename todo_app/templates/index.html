{% extends "layout.html" %} {% block title %}To-Do
App{% endblock %} {% block content %}

<script>
  const updateList = (id) => {
    fetch("/check", {
      method: "POST",
      headers: {
        Accept: "application/json",
        "Content-Type": "application/json",
      },
      body: JSON.stringify({
        id: id,
      }),
    })
      .then((response) => response.json())
      .then((data) => console.log(data))
      .catch((error) => console.log(error));
  };

  const deleteItem = (id) => {
    console.log(id);

    fetch("/delete", {
      method: "POST",
      headers: {
        Accept: "application/json",
        "Content-Type": "application/json",
      },
      body: JSON.stringify({
        id: id,
      }),
    })
      .then((response) => response.json())
      .then((data) => console.log(data))
      .catch((error) => console.log(error));
  };
</script>

<div class="jumbotron jumbotron-fluid p-2">
  <div class="container">
    <h1
      class="display-4 d-flex justify-content-center"
    >
      To-Do App
    </h1>
    <p class="lead d-flex justify-content-center">
      Just another to-do app.
    </p>
  </div>
</div>

<form method="post">
  <div class="form-group">
    <label for="exampleInputEmail1"
      >To-do item</label
    >
    <input
      type="text"
      class="form-control"
      id="newItem"
      name="item"
      placeholder="Enter item"
    />
  </div>
  <button type="submit" class="btn btn-primary">
    Submit
  </button>
</form>

<div class="row">
  <div class="col-md-12">
    <h2 class="d-flex justify-content-center">
      Items
    </h2>

    <ul class="list-group mb-4">
      {% for result in results %}
      <li class="list-group-item listItem">
        <input
          class="form-check-input"
          type="checkbox"
          value=""
          id="{{
        result.id
        }}"
          onclick="updateList('{{result.id}}')"
        />

        {% if result.status == "Not Started" %}{{
        result.title }}{% else %}
        <del>{{ result.title }}</del> {% endif %}
        <button
          type="button"
          class="btn btn-danger btn-sm"
          onclick="deleteItem('{{result.id}}')"
        >
          x
        </button>
      </li>

      {% endfor %}

      <!-- List the todo items here -->
    </ul>
  </div>
</div>
{% endblock %}
